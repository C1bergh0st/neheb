{% extends "base.html" %}

{% block content %}

<div class="container">
    {% if form %}
    <form action="#" method="post">
    {% csrf_token %}
    {{ form }}
    <input type="submit" value="Submit">
    {% endif %}
    {% if attendee %}
        <div>
            {{ attendee.name }}
            {{ attendee.score }}
            <canvas id="myChart" width="400" height="400"></canvas>
        </div>
    {% endif %}
    {% if msg %}
        <div class="alert alert-danger mt-2" role="alert">
            {{ msg }}
        </div>
    {% endif %}
</form>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js" integrity="sha256-t9UJPrESBeG2ojKTIcFLPGF7nHi2vEc7f5A2KpH/UBU=" crossorigin="anonymous"></script>
<script>
function toDay(day){
    let ar = ["Mo", "Di", "Mi", "Do", "Fr", "Sa", "So"];
    return ar[day];
}
var ctx = document.getElementById('myChart').getContext('2d');

//THIS IS IMPORTANT
let data = [1, 4, 8, 9, 14, 25];
let start = new Date()

let labels = [];
let color = 'rgba(255, 99, 132, 1)';
let colors = [];
for (let i = 0; i < data.length; i++){
    colors.push(color);
    start.setTime(start.getTime() + (1*60*60*1000));
    labels.push(toDay(start.getUTCDay()) + "-" + start.getUTCHours());
}
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: labels,
        datasets: [{
            label: "",
            data: data,
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
            ],
            borderColor: colors,
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});
</script>

{% endblock %}
